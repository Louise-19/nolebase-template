---
tags:
  - 双指针/快慢指针
---

# 234. 回文链表


力扣链接： https://leetcode.cn/problems/palindrome-linked-list/

## 题目
给你一个单链表的头节点 `head` ，请你判断该链表是否为回文链表。如果是，返回 `true` ；否则，返回 `false` 。

回文链表是正向反向读都一样的链表。

---
## 思路
本题需要用到：[[206. 反转链表]]

由于回文链表是正向反向读都一样的链表，所以如果从中间把链表切开，将后半部分反转过来，和前半部分比较是否相等，就能得知这是否是一个回文链表。

如下所示：
```Python
# 原链表（奇数的情况）
1 -> 2 -> 3 -> 2 -> 1
# 分成两半，反转后半部分：
1 -> 2 -> 3
1 -> 2

# 原链表（偶数的情况）
1 -> 2 -> 2 -> 1
# 分成两半，反转后半部分：
1 -> 2
1 -> 2
```

那么该如何得到后半部分的链表？看到 **一半**，就想到 #双指针/快慢指针 ，在慢指针走一步时，快指针走两步，这样当快指针走到头，则慢指针刚好指向链表的中点。

因为之前的题中有 [[206. 反转链表]] 的代码，因此你可以在本题的函数内嵌套一个函数专用于反转链表，这样能让代码的可读性更高，顺便回顾前面这道题的知识。

所以整道题的思路如下：
```Python
# 定义快慢指针，得到中点
while ...:
	slow = slow.next
	fast = fast.next.next
	
# 反转后半部分链表
def reverseList(head):
	... # 参见 206. 反转链表
	
# 判断后半部分和前半部分链表是否相等
while ...:
	if first_half.val != second_half:
		...
```
## 题解
```Python
## 题解
# Definition for singly-linked list.
# class ListNode(object):
#     def __init__(self, val=0, next=None):
#         self.val = val
#         self.next = next
class Solution(object):
    def isPalindrome(self, head):
        """
        :type head: Optional[ListNode]
        :rtype: bool
        """
        if not head or not head.next:
            return True

        fast, slow = head, head
        while fast and fast.next:
            slow = slow.next
            fast = fast.next.next
        
        # while 循环结束后，fast 指向链表尾部，slow 指向中点
        # 接下来构建反转链表的函数
        def reverseList(head):
            prev, curr = None, head
            while curr:
                next_temp = curr.next
                curr.next = prev
                prev = curr
                curr = next_temp
            return prev
        
        first_half = head
        # 执行反转链表，头节点是 slow
        second_half = reverseList(slow)

        # 比较两个链表是否一致：
        while second_half:
            if first_half.val != second_half.val:
                return False
            first_half = first_half.next
            second_half = second_half.next
        
        return True

```

## 易错点
#易错点 
- 注意第一个 while 循环条件：`while fast and fast.next` 中的 `fast.next` 不能漏。
	- **怎么想到的**：因为循环内部涉及 `fast.next.next`，如果 `fast.next.next = None.next` 那就完了。因为 `None` 不指向任何元素，如果运行时出现 `None.next` 会报错。所以要在 `fast.next` 为 `None` 时跳出循环。
- 涉及三次双指针的操作，注意命名规范，不要混淆。
	1. 第一次快慢指针：找到中点
	2. 第二次反转链表
	3. 第三次比较两个链表的值